# Generating a Client with OpenAPI Generator

### Installing OpenAPI Generator

If you haven't installed OpenAPI Generator yet, you can install it using npm (Node.js required) or Homebrew (on macOS):

To install with npm:
```shell
sudo npm install @openapitools/openapi-generator-cli -g
```

To install with Homebrew:
```shell
brew install openapi-generator
```

### Generating the Client
Use the following command to generate the client code. Assuming your OpenAPI specification file is named openapi.json and you want to generate a Python client:

```shell
./sourceGen.sh
```
In this command:

* -i openapi.json specifies the input file.
* -g python specifies the client language to generate, in this case, Python.
* -o ./generated-client specifies the output directory.


### Viewing the Generated Client
Once the generation is complete, you can find the generated client code in the specified output directory (e.g., ./generated-client).

### Updating the code
Use the generated code to write test cases, referring to the Markdown documents in the biz_logic/rest_api/docs directory.

### Generating API access token
Since the API for testing requires a token, the command below can be used to obtain token-related information.

```shell
aws cognito-idp initiate-auth \
          --region $REGION \
          --auth-flow USER_PASSWORD_AUTH \
          --client-id $OIDC_CLIENT_ID \
          --auth-parameters USERNAME=$SUB_EMAIL,PASSWORD=$ADMIN_PASSWORD
```
In this command:

* REGION, SUB_EMAIL, and ADMIN_PASSWORD are the variables defined in the buildspec.yaml
* OIDC_CLIENT_ID is output variable generated by the deployment of the Stack, which can be obtained from the CloudFormation console.

IdToken returned by the above command is the AccessToken required to access the API.

### Updating env
Updating env file in which,


```shell
aws cognito-idp initiate-auth \
          --region us-east-1 \
          --auth-flow USER_PASSWORD_AUTH \
          --client-id 1t40t7rhb7f2mef8fg356mtj6t \
          --auth-parameters USERNAME=cuihubin@amazon.com,PASSWORD=TEST123!
```